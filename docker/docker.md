# Docker

## Docker의 역사

- 시작 : 2013년 3월 산타클라라에서 열린 `Pycon Conference`에서 dotCloud 창업자인 `Solomon Hykes`가   
  `The future of Linux Containers`라는 세션을 발표하며 처음 알려지게 되었다.

- 동향 : 2016년 설문조사에 따르면,    
  90%가 docker를 개발에 사용 중 / 80%가 DevOps에 사용할 예정 / 58%가 운영환경에서 사용 중이라 한다.

## Docker란?

- 개념 : `컨테이너 기반의 오픈소스 가상화 플랫폼`  

 > 그렇다면, 컨테이너란?

- 컨테이너 : `격리된 공간에서 프로세스가 동작하는 기술`  
  다양한 프로그램과 실행환경을 컨테이너로 추상화하고 동일한 인터페이스를 제공하여 프로그램의 배포 및 관리를 단순하게 해줌.
  
  > 컨테이너도 가상화 기술이지만, 다른 방식과의 차이는?
  
  - 다른 방식의 가상머신(ex. VMware, VirtualBox) : `OS 가상화 방식 사용` , 사용법이 간단하지만 무겁고 느려 운영환경에선 사용 어려운 편.
  - 가상 컴퓨팅 기반의 가상화 기술(ex. docker) : `프로세스 격리 방식 사용`, OS 전체를 가상화하지 않아 성능 향상. 
  
      가상 머신 | 도커 (Docker)
      ---|---
      OS 가상화 방식 | 프로세스 격리 방식
 
  > 간단히 정리해보면, 다음 표와 같다.
  > 그렇다면 프로세스 격리 방식을 사용하는 것의 장점은 무엇일까?
  
  하나의 서버에 여러개의 컨테이너를 사용하여도 서로 독립적으로 실행되는 프로세스 개념이어서 `빠르고 가볍게 동작.`  
  새로운 컨테이너를 만드는 데 걸리는 시간이 1초 가량으로 빠름.
  
  또한, 실행중인 컨테이너에 접속하여  
  명령어 입력, 패키지 설치, 사용자 추가, 여러 프로세스 백그라운드 실행, CPU 및 메모리 사용량 제한 가능,   
  특정 포트와 연결, 호스트 특정 디렉토리를 내부 디렉토리인 것 처럼 사용하는 등의 다양한 동작이 가능하다.
  
  ---
  
- 이미지 : `컨테이너 실행에 필요한 모든 정보인 파일과 설정 값 등을 포함하고 있는 것`으로   
  상태 값을 가지고 있으며 변하지 않는다. 
  
  > 컨테이너는 `이미지가 실행된 상태`로    
  > 컨테이너가 삭제되거나 상태가 변하여도 이미지는 변하지 않으며 그대로 남아있다.
  
  즉, 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있다.
  새로운 서버가 추가되면 미리 만든 이미지를 다운받고 컨테이너를 생성하면 되며,
  한 서버에 여러개의 컨테이너를 실행할 수 있다.
  
  - 이미지 저장 방식 : `레이어 저장 방식`  
  
  
  Ubuntu | nginx | Web app                     
  ----| ---- | ----
  | | | | `R/W layer`
  | | | `web app source` 
  | | `nginx` | nginx 
  Layer C | Layer C | Layer C 
  Layer B | Layer B | Layer B 
  Layer A | Layer A | Layer A 

